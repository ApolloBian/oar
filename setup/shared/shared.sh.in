set -e
# shared functions for oar setup files.

install_conffile() {
    local src dst rights owner
    src=$1
    dst=$2
    rights=$3
    owner=$4


    case "%%SETUP_TYPE%%" in

        "deb")
            ucf --debconf-ok $src $dst 
            if [ -n "$rights" ]; then
                chmod $rights $dst
            fi
            if [ -n "$owner" ]; then
                chown $owner $dst
            fi
            ;;
        "rpm")
            : # Don't known how to handle it
            ;;
        "tgz"|*)
            install_if_not_exist $*
            ;;
    esac
}


install_if_not_exist() {
    local src dst rights owner
    src=$1
    dst=$2
    rights=$3
    owner=$4

        
    if [ -f "$dst" ]; then 
        :
    else 
        install $src $dst
        if [ -n "$rights" ]; then
            chmod $rights $dst
        fi
        if [ -n "$owner" ]; then
            chown $owner $dst
        fi
    fi
}


