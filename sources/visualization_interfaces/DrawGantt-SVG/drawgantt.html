<!DOCTYPE html>
<html>
  <head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Drawgantt HTML5+SVG</title>
<style>
	body {
		background-color: #FFFFFF;
	}
	#panel {
		position: absolute;
		background-color: #DDDDDD;
		top: 0px;
		left: 0px;
		width: 100%;
		z-index: 0;
		opacity: 1;
	}
	#gantt {
		z-index: 0;
	}
</style>
<script type="text/javascript">
	window.onscroll = scroll;
	window.onresize = reload_content;
	var relative_start = -86400;
	var relative_stop = 86400;
	var filter = "";
	function scroll() {
		var panelDiv=document.getElementById("panel");
		panelDiv.style.top = (window.scrollY -20) + "px";
	}
	function show_panel() {
		var panelDiv=document.getElementById("panel");
		//panelDiv.style.opacity = "1";
		panelDiv.style.top = window.scrollY + "px";
	}
	function hide_panel() {
		var panelDiv=document.getElementById("panel");
		//panelDiv.style.opacity = "0";
		panelDiv.style.top = (window.scrollY - 20)+ "px";
	}
	function reset() {
		relative_start = -86400;
		relative_stop = 86400;
		reload_content();
	}
	function shift(time) {
		relative_start += time;
		relative_stop += time;
		reload_content();
	}
	function next() {
		var t = relative_stop + (relative_stop - relative_start);
		relative_start = relative_stop;
		relative_stop = t;
		reload_content();
	}
	function prev() {
		var t = relative_start - (relative_stop - relative_start);
		relative_stop = relative_start;
		relative_start = t;
		reload_content();
	}
	function zoomin() {
		var t = relative_start + (relative_stop - relative_start) / 4;
		relative_stop = relative_stop - (relative_stop - relative_start) / 4;
		relative_start = t;
		reload_content();
	}
	function zoomout() {
		var t = (relative_stop - relative_start)/2;
		relative_stop += t;
		relative_start -= t;
		reload_content();
	}
	function reload_content() {
		var svgObj=document.getElementById("svgObj");
		var newURL= "drawgantt-svg.php?width=" + (window.innerWidth - 50)  + "&relative_start=" + relative_start + "&relative_stop=" + relative_stop + ((filter)?"&filter=cluster='" + filter + "'":"");
		svgObj.data = newURL
		svgObj.innerHTML = newURL
	}
	function selectFilter() {
		var filterSelect=document.getElementById("filterSelect");
		filter = filterSelect.value;
		reload_content();
	}
	function init() {
		hide_panel();
		reload_content();
	}
</script>
</head>
<body onload="init()">
<div id="panel" onmouseover="show_panel()" onmouseout="hide_panel()">
<select id="filterSelect" onchange="selectFilter()">
<option value="" selected>all machines</option>
<option value="cluster1">cluster1 only</option>
<option value="cluster2">cluster2 only</option>
<option value="cluster3">cluster3 only</option>
</select>
<button id="-1wBtn" type="button" onclick="shift(-604800)">&lt;1w</button>
<button id="-1dBtn" type="button" onclick="shift(-86400)">&lt;1d</button>
<button id="-6hBtn" type="button" onclick="shift(-21600)">&lt;6h</button>
<button id="-1hBtn" type="button" onclick="shift(-3600)">&lt;1h</button>
<button id="prevBtn" type="button" onclick="prev()">&lt;&lt;</button>
<button id="zoomoutBtn" type="button" onclick="zoomout()">-</button>
<button id="zoominBtn" type="button" onclick="zoomin()">+</button>
<button id="nextBtn" type="button" onclick="next()">&gt;&gt;</button>
<button id="+1hBtn" type="button" onclick="shift(3600)">&gt;1h</button>
<button id="+6hBtn" type="button" onclick="shift(21600)">&gt;6h</button>
<button id="+1dBtn" type="button" onclick="shift(86400)">&gt;1d</button>
<button id="+1wBtn" type="button" onclick="shift(604800)">&gt;1w</button>
<button id="resetBtn" type="button" name="reset" value="reset" onclick="reset()">reset</button>
</div>
<div id="gantt">
<object id="svgObj" type="image/svg+xml" data="" </object>
</div>
</body>
</html>
